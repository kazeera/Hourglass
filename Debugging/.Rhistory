# Save start time to a variable
start_time <- Sys.time()
# Import functions to run this script
library(dplyr)
# List directories containing functions
dir_funcs <- "R"
# Read in source files in each directory
invisible(lapply(dir_funcs, function(dir) {
lapply(list.files(dir), function(fil){
tryCatch(
source(paste(dir,fil, sep="/")), finally = return()
)
})
}))
# for(dir in dir_funcs) {
#   for(fil in+ list.files(dir) ){
#     source(paste(dir,fil, sep="/"))
#   }
# }
# Call required libraries
load_packages(c("ggplot2", "ggpubr", "ggsignif", "reshape2",# box plots and bar graph
"pheatmap", "RColorBrewer", "scales", "corrplot", "viridis", "psych", # heatmaps
"openxlsx", "plyr", #mapvalues
"dplyr", "ComplexHeatmap", "gtools", #combinations
"survival", "survminer"))
# Make a log file for output printed to console
sink(sprintf("%s_data_log.txt", format(Sys.Date(), "%Y%m%d")))
# Load constants
source("constants_vars.R")
# Make "dataset" objects
source("1.prepare_data.R")
# Run all comparisons - heat maps and boxplots together
source("2.run_comparisons.R")
# Print time difference to run log
end_time <- Sys.time()
print(end_time - start_time)
# Stop sinking console output
sink()
# # Quit R
# quit(save = "no", status=0)
